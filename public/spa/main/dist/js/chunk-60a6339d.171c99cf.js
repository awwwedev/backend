(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60a6339d"],{"590f":function(e,t,a){},"66ec":function(e,t,a){"use strict";a("a20a")},"6f88":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"section"},[a("h1",{staticClass:"mb-5"},[e._v(e._s(e.pageName))]),a("b-nav",{staticClass:"mb-3",attrs:{tabs:""}},[a("b-nav-item",{attrs:{active:0===e.activeTab},on:{click:function(t){e.activeTab=0}}},[e._v(e._s(e.mainTabName))]),a("b-nav-item",{attrs:{active:1===e.activeTab},on:{click:function(t){e.activeTab=1}}},[e._v("Предпросмотр карточек")])],1),0===e.activeTab?a("b-form",[a("Dates",{attrs:{"form-data":e.formData}}),a("b-card",{staticClass:"mb-3 shadow-sm",attrs:{header:"Основное"}},[a("b-form-group",{attrs:{label:"Заголовок","label-for":"header","invalid-feedback":e.getValidationMessage(e.$v.formData.header)}},[a("b-form-input",{attrs:{id:"header",state:e.getFieldState(e.$v.formData.header)},model:{value:e.formData.header,callback:function(t){e.$set(e.formData,"header","string"===typeof t?t.trim():t)},expression:"formData.header"}})],1),a("b-form-group",{attrs:{label:"Описание","label-for":"description","invalid-feedback":e.getValidationMessage(e.$v.formData.content)}},[a("vue-editor",{staticClass:"text-editor",class:{"is-invalid":e.$v.formData.content.$error},attrs:{id:"textarea","editor-toolbar":e.customToolbar},model:{value:e.formData.content,callback:function(t){e.$set(e.formData,"content","string"===typeof t?t.trim():t)},expression:"formData.content"}})],1)],1),a("b-card",{staticClass:"mb-3 shadow-sm",attrs:{header:"Основное изображение"}},[a("UploadedImage",{attrs:{image:e.formData.photo},on:{imageInitialized:function(t){e.temp.previewImagePath=t}}}),a("b-form-group",{attrs:{"label-for":"img_path","invalid-feedback":e.getValidationMessage(e.$v.formData.photo)}},[a("b-file",{attrs:{"browse-text":"Обзор...",id:"img_path",state:e.getFieldState(e.$v.formData.photo)},scopedSlots:e._u([{key:"placeholder",fn:function(){return[e._v(" Нет файлов ")]},proxy:!0}],null,!1,3920054766),model:{value:e.temp.previewImageModel,callback:function(t){e.$set(e.temp,"previewImageModel",t)},expression:"temp.previewImageModel"}})],1)],1),a("ConstructorActions",{attrs:{"cancel-to":{name:"admin.news"},"is-create-page":e.isCreatePage},on:{submit:e.onSubmit}})],1):1===e.activeTab?a("PreviewTab",{attrs:{"form-data":e.formData}}):e._e()],1)},n=[],r=a("d4ec"),o=a("bee2"),s=a("262e"),c=a("2caf"),d=(a("a9e3"),a("9ab4")),l=a("1b40"),u=a("bf19"),m=a("1dce"),b=a("c67c"),p=a("b5ae"),f=a("c3e5"),h=a("0763"),v=a("fa10"),g=a("6fc5"),_=a("37c5"),j=a("5873"),O=a("5732"),w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("b-card",{staticClass:"shadow-sm mb-3",attrs:{header:"Слайдер"}},[a("NewsSlide",{attrs:{id:e.formData.id,photo:e.formData.photo,header:e.formData.header,content:e.formData.content}})],1),a("b-card",{staticClass:"shadow-sm mb-3 "},[a("NewsCard",{staticStyle:{width:"400px",height:"300px"},attrs:{id:e.formData.id,"img-path":e.formData.photo,name:e.formData.header,content:e.formData.content}})],1)],1)},y=[],D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"slide"},[a("div",{staticClass:"slide__flex-wrapper flex-wrapper"},[a("ibg",{staticClass:"slide__img",attrs:{src:e.basePath+e.photo}}),a("div",{staticClass:"slide__body"},[a("h3",{staticClass:"slide__title"},[e._v(e._s(e.header))]),a("p",{staticClass:"slide__text",domProps:{innerHTML:e._s(e.content)}})])],1)])},k=[],C=a("91c4"),$=function(e){Object(s["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return a}(l["h"]);Object(d["a"])([Object(l["c"])("basePath")],$.prototype,"basePath",void 0),$=Object(d["a"])([Object(l["a"])({components:{Ibg:C["a"]},props:{id:{type:Number,required:!0},content:{type:String,required:!0},photo:{type:String,required:!0},header:{type:String,required:!0}}})],$);var P=$,x=P,I=(a("fcfb"),a("2877")),T=Object(I["a"])(x,D,k,!1,null,"3c65dc1a",null),q=T.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"news",on:{mouseenter:function(t){e.isHovered=!0},mouseleave:function(t){e.isHovered=!1}}},[a("a",{staticClass:"news__link",on:{click:function(t){return e.$emit("click")}}}),a("div",{staticClass:"news__content-wrapper"},[a("ibg",{staticClass:"news__img",attrs:{src:e.basePath+e.imgPath}}),a("div",{ref:"name",staticClass:"news__name"},[a("div",{ref:"name-value",staticClass:"news__name-value"},[a("span",[e._v(e._s(e.name+(e.name.length>65?"...":"")))])])])],1)])},M=[],S=(a("7db0"),a("fb6a"),a("b0c0"),a("1157")),H=a.n(S),V=a("f3e7"),F=function(e){Object(s["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.isHovered=!1,e.oldHeight=0,e}return Object(o["a"])(a,[{key:"descriptionValue",get:function(){return Object(V["a"])(this.content)}},{key:"mounted",value:function(){this.oldHeight=H()(this.refName).height()}},{key:"watchIsHovered",value:function(e){var t=this;e?H()(this.refName).stop().animate({height:"100%"},{start:function(){H()(this).css("background-color","rgba(50,161,208,0.8)").find(".news__name-value").animate({opacity:0},{duration:200})},done:function(){H()(this).find(".news__name-value").height("100%").addClass("news__name-value_big").animate({opacity:1},400).find("span").text(t.descriptionValue.slice(0,65)+(t.descriptionValue.length>65?"...":""))}}):H()(this.refName).stop().animate({height:this.oldHeight},{start:function(){H()(this).css("background-color","#32a1d0").find(".news__name-value").animate({opacity:0},{duration:200})},done:function(){var e=this;setTimeout((function(){H()(e).find(".news__name-value").removeClass("news__name-value_big").animate({opacity:1},200).find("span").text(t.name.slice(0,65)+(t.name.length>65?"...":""))}),200)}})}}]),a}(l["h"]);Object(d["a"])([Object(l["e"])({required:!0})],F.prototype,"name",void 0),Object(d["a"])([Object(l["e"])({required:!0})],F.prototype,"imgPath",void 0),Object(d["a"])([Object(l["e"])({required:!0})],F.prototype,"content",void 0),Object(d["a"])([Object(l["g"])("name")],F.prototype,"refName",void 0),Object(d["a"])([Object(l["g"])("name-value")],F.prototype,"refNameValue",void 0),Object(d["a"])([Object(l["c"])("basePath")],F.prototype,"basePath",void 0),Object(d["a"])([Object(l["i"])("isHovered")],F.prototype,"watchIsHovered",null),F=Object(d["a"])([Object(l["a"])({components:{Ibg:C["a"]}})],F);var E=F,U=E,A=(a("ade7"),Object(I["a"])(U,N,M,!1,null,"40546a5c",null)),J=A.exports,L=function(e){Object(s["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return a}(l["h"]);Object(d["a"])([Object(l["e"])({required:!0})],L.prototype,"formData",void 0),L=Object(d["a"])([Object(l["a"])({components:{NewsCard:J,NewsSlide:q}})],L);var z=L,B=z,G=Object(I["a"])(B,w,y,!1,null,"82cc2c54",null),K=G.exports,Q=function(e){Object(s["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.entityName="новости",e.activeTab=0,e.formData={id:null,header:"",content:"",photo:null,created_at:null,updated_at:null},e.temp={previewImagePath:"",previewImageModel:null},e}return Object(o["a"])(a,[{key:"mainTabName",get:function(){return this.$route.meta.isCreatePage?"Создание":"Редактирование"}},{key:"onSubmit",value:function(){var e,t=this,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$v.$touch(),this.$v.$invalid?Object(g["e"])(_["a"],this.$store).setData({title:"Ошибка валидации!",text:"Проверте корректность и запоолненость полей",variant:"danger"}):(e=this.isCreatePage?v["a"].create(this.formData).then((function(e){Object(g["e"])(_["a"],t.$store).setData({title:"Запись успешно создана",variant:"success"}),t.$router.push({name:"admin.news.change",params:{id:e.data.id}})})):v["a"].update(this.formData).then((function(e){Object(g["e"])(_["a"],t.$store).setData({title:"Запись успешно изменена",variant:"success"}),t.updateFormData(e.data)})),e.then((function(){a&&t.$router.push({name:"admin.realty"})})))}},{key:"updateFormData",value:function(e){this.temp={previewImageModel:null,previewImagePath:e.photo},this.formData={content:e.content,header:e.header,id:e.id,photo:e.photo,created_at:e.created_at,updated_at:e.updated_at}}},{key:"watchTempPreviewImageModel",value:function(e){e&&(this.formData.photo=e)}},{key:"watchIsCreatePage",value:function(e){var t=this;e||v["a"].get({id:Number(this.$route.params.id)}).then((function(e){t.updateFormData(e.data)}))}}]),a}(Object(l["d"])(m["validationMixin"],b["a"],u["a"]));Object(d["a"])([Object(l["i"])("temp.previewImageModel")],Q.prototype,"watchTempPreviewImageModel",null),Object(d["a"])([Object(l["i"])("$route.meta.isCreatePage",{immediate:!0})],Q.prototype,"watchIsCreatePage",null),Q=Object(d["a"])([Object(l["a"])({components:{PreviewTab:K,Dates:O["a"],UploadedImage:h["a"],ConstructorActions:f["a"],VueEditor:j["a"]},validations:{formData:{header:{required:p["required"]},photo:{required:p["required"]},content:{required:p["required"]}}},data:function(){return{customToolbar:[[{header:[!1,2,3,4,5,6]}],["bold","italic","underline","strike"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link"],["clean"]]}}})],Q);var R=Q,W=R,X=(a("66ec"),Object(I["a"])(W,i,n,!1,null,"1ce9de46",null));t["default"]=X.exports},a20a:function(e,t,a){},ade7:function(e,t,a){"use strict";a("590f")},b9f6:function(e,t,a){},fa10:function(e,t,a){"use strict";var i=a("5530"),n=a("d4ec"),r=a("bee2"),o=a("262e"),s=a("2caf"),c=(a("d3b7"),a("3949"),a("c873")),d=a("72df"),l=function(e){Object(o["a"])(a,e);var t=Object(s["a"])(a);function a(){return Object(n["a"])(this,a),t.apply(this,arguments)}return Object(r["a"])(a,null,[{key:"getList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:1};return c["a"].get("news",{params:e})}},{key:"get",value:function(e){return c["a"].get("news/"+e.id,{params:e})}},{key:"create",value:function(e){return c["a"].post("news",a.prepareFormData(e))}},{key:"update",value:function(e){return c["a"].post("news/"+e.id,a.prepareFormData(Object(i["a"])(Object(i["a"])({},e),{},{_method:"PUT"})))}},{key:"destroy",value:function(e){return c["a"].delete("news",{params:{id:e}})}}]),a}(d["a"]);t["a"]=l},fcfb:function(e,t,a){"use strict";a("b9f6")}}]);
//# sourceMappingURL=chunk-60a6339d.171c99cf.js.map